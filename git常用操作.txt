 Git 常用操作笔记文档

 一、Git 配置管理

 1.1 用户信息配置

 全局配置（对所有仓库生效）
git config --global user.name "你的姓名"
git config --global user.email "你的邮箱"

 查看所有配置
git config --list

 查看特定配置
git config user.name


 1.2 别名配置（提高效率）

git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status


 二、仓库操作

 2.1 创建与克隆

 初始化新仓库
git init

 克隆远程仓库
git clone <仓库URL>
git clone <仓库URL> <自定义目录名>

 克隆指定分支
git clone -b <分支名> <仓库URL>


 2.2 远程仓库管理

 查看远程仓库
git remote -v

 添加远程仓库
git remote add origin <仓库URL>

 修改远程仓库地址
git remote set-url origin <新URL>

 删除远程仓库
git remote remove origin


 三、基础工作流

 3.1 文件状态与提交

 查看工作区状态
git status
git status -s   简洁模式

 添加文件到暂存区
git add <文件名>
git add .       添加所有文件
git add -A      添加所有修改和删除的文件

 提交更改
git commit -m "提交说明"
git commit -am "提交说明"   自动添加跟踪过的文件并提交

 修改最后一次提交
git commit --amend
git commit --amend --no-edit   不改提交信息


 3.2 查看历史与差异

 查看提交历史
git log
git log --oneline            简洁模式
git log --graph              图形化显示分支
git log -n 5                 显示最近5次提交
git log --since="2024-01-01" --until="2024-12-31"

 查看文件差异
git diff                     工作区与暂存区差异
git diff --staged           暂存区与仓库差异
git diff HEAD               工作区与最新提交差异
git diff <commit1> <commit2>   两次提交间差异


 四、分支管理

 4.1 分支操作

 查看分支
git branch            本地分支
git branch -a         所有分支（包括远程）
git branch -r         远程分支

 创建分支
git branch <分支名>
git checkout -b <分支名>   创建并切换

 切换分支
git checkout <分支名>
git switch <分支名>        Git 2.23+ 推荐方式

 合并分支
git merge <要合并的分支名>

 删除分支
git branch -d <分支名>     安全删除（已合并）
git branch -D <分支名>     强制删除（未合并）


 4.2 远程分支操作

 拉取远程分支到本地
git fetch origin
git checkout -b <本地分支名> origin/<远程分支名>

 推送本地分支到远程
git push origin <本地分支名>
git push -u origin <本地分支名>   建立追踪关系

 删除远程分支
git push origin --delete <分支名>


 五、撤销与恢复

 5.1 撤销修改

 撤销工作区修改（未add）
git checkout -- <文件名>
git restore <文件名>         Git 2.23+ 推荐

 撤销暂存区修改（已add）
git reset HEAD <文件名>
git restore --staged <文件名>   Git 2.23+

 撤销提交（回退到指定版本）
git reset --soft HEAD~1      保留修改到暂存区
git reset --mixed HEAD~1     保留修改到工作区（默认）
git reset --hard HEAD~1      彻底删除修改（谨慎使用）

 撤销远程提交（强制推送）
git push origin <分支名> --force
git push origin <分支名> -f


 5.2 恢复删除的文件

 查看删除记录
git log --oneline -- <文件名>

 恢复文件
git checkout <commit_hash> -- <文件名>


 六、标签管理


 查看标签
git tag
git tag -l "v1.*"           过滤查看

 创建标签
git tag <标签名>             轻量标签
git tag -a <标签名> -m "说明"   附注标签

 删除标签
git tag -d <标签名>
git push origin --delete tag <标签名>   删除远程标签

 推送标签到远程
git push origin <标签名>
git push origin --tags      推送所有标签


 七、高级操作

 7.1 储藏（Stash）

 储藏当前修改
git stash
git stash save "说明信息"

 查看储藏列表
git stash list

 恢复储藏
git stash apply           恢复，不删除储藏
git stash apply stash@{n}  恢复指定储藏
git stash pop            恢复并删除储藏

 删除储藏
git stash drop stash@{n}
git stash clear          删除所有储藏


 7.2 变基（Rebase）

 变基操作
git rebase <目标分支>

 交互式变基（合并/修改提交）
git rebase -i HEAD~3

 变基过程中解决冲突后继续
git rebase --continue

 取消变基
git rebase --abort


 7.3 子模块（Submodule）

 添加子模块
git submodule add <仓库URL> <路径>

 初始化子模块
git submodule init
git submodule update

 更新子模块
git submodule update --remote


 八、日常使用工作流示例

 8.1 新功能开发

 1. 创建功能分支
git checkout -b feature/new-feature

 2. 开发并提交
git add .
git commit -m "添加新功能"

 3. 同步主分支更新
git checkout main
git pull origin main
git checkout feature/new-feature
git rebase main

 4. 推送并合并
git push origin feature/new-feature
 在代码平台创建 Pull Request/Merge Request


 8.2 紧急修复

 1. 基于主分支创建修复分支
git checkout -b hotfix/bug-fix main

 2. 修复并提交
git add .
git commit -m "修复紧急bug"

 3. 快速合并到主分支
git checkout main
git merge hotfix/bug-fix
git push origin main


 九、常见问题解决

 9.1 提交信息写错

git commit --amend


 9.2 漏提交文件

git add <漏掉的文件>
git commit --amend --no-edit


 9.3 撤销错误的合并

git merge --abort           合并前撤销
git reset --hard HEAD~      合并后撤销（强制）


 9.4 找回被删除的分支

 查看所有提交记录（包括删除的分支）
git reflog

 找回分支
git checkout -b <分支名> <commit_hash>

